---
import { SEO } from "astro-seo";
import "../../styles/global.scss";
import "@fontsource-variable/lexend";

const { title = "", description = "", type = "website" } = Astro.props;
const social_image = "";
---

<head>
  <title>{title}</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta property="description" content={description} />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="utf-8" />

  <script
    is:inline
    src="https://www.googletagmanager.com/gtag/js?id=G-B4RHDV0Y5H"></script>

  <script>
    // We need a global definition to avoid type warnings
    declare global {
      interface Window {
        dataLayer: Record<string, any>[];
        gtag: (...args: any[]) => void;
      }
    }

    // Initialize dataLayer
    window.dataLayer = window.dataLayer || [];

    // Define gtag function
    window.gtag = function gtag(...args: any[]) {
      window.dataLayer.push(arguments);
    };

    // Load GA4 with denied default consents
    window.gtag("js", new Date());
    window.gtag("consent", "default", {
      ad_storage: "denied",
      ad_user_data: "denied",
      ad_personalization: "denied",
      analytics_storage: "denied",
    });
    window.gtag("config", "G-B4RHDV0Y5H");
  </script>

  <script
    src="https://app.viral-loops.com/widgetsV2/core/loader.js"
    data-campaign-id="e9xz4agONxBxkGnd7pUojPlnY4Y"
    id="viral-loops-loader"
    defer></script>
  <!-- Meta Pixel Code -->
  <script is:inline data-category="analytics">
    // @ts-ignore
    !(function (f, b, e, v, n, t, s) {
      // @ts-ignore

      if (f.fbq) return;
      n = f.fbq = function () {
        n.callMethod
          ? // @ts-ignore
            n.callMethod.apply(n, arguments)
          : n.queue.push(arguments);
      };

      // @ts-ignore
      if (!f._fbq) f._fbq = n;
      n.push = n;
      n.loaded = !0;
      n.version = "2.0";

      // @ts-ignore
      n.queue = [];
      t = b.createElement(e);
      t.async = !0;

      // @ts-ignore
      t.src = v;
      s = b.getElementsByTagName(e)[0];

      // @ts-ignore
      s.parentNode.insertBefore(t, s);
    })(
      window,
      document,
      "script",
      "https://connect.facebook.net/en_US/fbevents.js"
    );
    // @ts-ignore
    fbq("init", "665512622734995");
    // @ts-ignore
    fbq("track", "PageView");
  </script>
  <noscript
    ><img
      height="1"
      width="1"
      style="display:none"
      src="https://www.facebook.com/tr?
  id=665512622734995&ev=PageView&noscript=1"
    /></noscript
  >
  <!-- End Meta Pixel Code -->

  <SEO
    title={title}
    description={description}
    openGraph={{
      basic: {
        title: title,
        type: type,
        image: social_image,
      },
    }}
    ,
    extend={{
      meta: [
        {
          property: "twitter:image",
          content: social_image,
        },
        {
          property: "og:image",
          content: social_image,
        },
        {
          property: "og:description",
          content: description,
        },
      ],
    }}
  />

</head>
